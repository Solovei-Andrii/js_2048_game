{"version":3,"sources":["scripts/playinfField.js","scripts/main.js"],"names":["PlayingField","field","score","randomIndex","randomNumber","generateExtraNumber","Math","random","lengthOfLine","floor","emptyValues","i","j","push","randPairs","length","matrix","map","_","colIndex","row","number","copyField","result","flat","filter","el","countScore","k","uncorrectSwipe","e","unshift","transpose","left","right","window","playingField","startGame","start","draw","document","querySelector","classList","add","remove","addEventListener","gameKeys","occurrent","loseMessage","winMassage","contains","key","up","down","fieldCeils","querySelectorAll","forEach","index","textContent","loseGame","winner","changeScore","every","notAdded","style","cursor","n","m","currentValue","some"],"mappings":"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","file":"main.85f8c997.js","sourceRoot":"..\\src","sourcesContent":["export default class PlayingField {\n  constructor() {\n    this.field = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n    this.score = 0;\n  }\n\n  start() {\n    this.field[this.randomIndex()][this.randomIndex()] = this.randomNumber();\n\n    this.generateExtraNumber();\n  }\n\n  randomNumber() {\n    return Math.random() < 0.5 ? 2 : 4;\n  }\n\n  randomIndex(lengthOfLine = 4) {\n    return Math.floor(Math.random() * lengthOfLine);\n  }\n\n  generateExtraNumber() {\n    const emptyValues = [];\n\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        if (this.field[i][j] === 0) {\n          emptyValues.push([i, j]);\n        }\n      }\n    }\n\n    const randPairs = emptyValues[this.randomIndex(emptyValues.length)];\n\n    this.field[randPairs[0]][randPairs[1]] = this.randomNumber();\n  }\n\n  transpose(matrix) {\n    return matrix[0].map((_, colIndex) => matrix.map(row => row[colIndex]));\n  }\n\n  countScore(number) {\n    this.score += number;\n  }\n\n  uncorrectSwipe(copyField) {\n    let result = false;\n\n    for (let i = 0; i < copyField.length; i++) {\n      if (copyField[i] !== this.field.flat()[i]) {\n        result = true;\n        continue;\n      }\n    }\n\n    return result;\n  }\n\n  left() {\n    try {\n      const copyField = [...this.field.flat()];\n\n      for (let i = 0; i < 4; i++) {\n        this.field[i] = this.field[i].filter(el => el !== 0);\n\n        if (this.field[i].length < 4) {\n          for (let j = this.field[i].length; j < 4; j++) {\n            this.field[i].push(0);\n          }\n        }\n      }\n\n      for (let i = 0; i < 4; i++) {\n        for (let j = 0; j < 4; j++) {\n          if (this.field[i][j] === this.field[i][j + 1]) {\n            this.field[i][j] *= 2;\n            this.countScore(this.field[i][j]);\n            this.field[i][j + 1] = 0;\n            this.field[i] = this.field[i].filter(el => el !== 0);\n\n            if (this.field[i].length < 4) {\n              for (let k = this.field[i].length; k < 4; k++) {\n                this.field[i].push(0);\n              }\n            }\n          }\n        }\n      }\n\n      if (this.uncorrectSwipe(copyField) === true) {\n        this.generateExtraNumber();\n      } else {\n\n      }\n    } catch (e) {\n\n    }\n  }\n\n  right() {\n    try {\n      const copyField = [...this.field.flat()];\n\n      for (let i = 0; i < 4; i++) {\n        this.field[i] = this.field[i].filter(el => el !== 0);\n\n        if (this.field[i].length < 4) {\n          for (let j = this.field[i].length; j < 4; j++) {\n            this.field[i].unshift(0);\n          }\n        }\n      }\n\n      for (let i = 0; i < 4; i++) {\n        for (let j = 3; j >= 0; j--) {\n          if (this.field[i][j] === this.field[i][j - 1]) {\n            this.field[i][j] *= 2;\n            this.countScore(this.field[i][j]);\n            this.field[i][j - 1] = 0;\n            this.field[i] = this.field[i].filter(el => el !== 0);\n\n            if (this.field[i].length < 4) {\n              for (let k = this.field[i].length; k < 4; k++) {\n                this.field[i].unshift(0);\n              }\n            }\n          }\n        }\n      }\n\n      if (this.uncorrectSwipe(copyField) === true) {\n        this.generateExtraNumber();\n      } else {\n\n      }\n    } catch (el) {}\n  }\n\n  up() {\n    this.field = this.transpose(this.field);\n\n    this.left();\n\n    this.field = this.transpose(this.field);\n  }\n\n  down() {\n    this.field = this.transpose(this.field);\n\n    this.right();\n\n    this.field = this.transpose(this.field);\n  }\n}\n","\nimport PlayingField from './playinfField';\nwindow.PlayingField = PlayingField;\n\nconst playingField = new PlayingField();\n\nfunction startGame() {\n  playingField.field = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n  playingField.score = 0;\n  playingField.start();\n  draw();\n  document.querySelector('.message.message-lose').classList.add('hidden');\n  document.querySelector('.message.message-win').classList.add('hidden');\n  document.querySelector('.start').classList.add('hidden');\n  document.querySelector('.restart').classList.remove('hidden');\n}\n\ndocument.querySelector('.start').addEventListener('click', function() {\n  document.querySelector('.message.message-start').classList.add('hidden');\n\n  startGame();\n});\n\ndocument.querySelector('.message.message-lose').addEventListener('click', function() {\n  startGame();\n});\n\ndocument.querySelector('.restart').addEventListener('click', function() {\n  startGame();\n});\n\nconst gameKeys = function(occurrent) {\n  const loseMessage = document.querySelector('.message.message-lose');\n  const winMassage = document.querySelector('.message.message-win');\n\n  if (loseMessage && !(loseMessage.classList.contains('hidden'))) {\n    return;\n  }\n\n  if (winMassage && !(winMassage.classList.contains('hidden'))) {\n\n  } else {\n    switch (occurrent.key) {\n      case 'ArrowUp':\n        playingField.up();\n        draw();\n        break;\n      case 'ArrowDown':\n        playingField.down();\n        draw();\n        break;\n      case 'ArrowRight':\n        try {\n          playingField.right();\n        } catch (e) {}\n        draw();\n        break;\n      case 'ArrowLeft':\n        try {\n          playingField.left();\n        } catch (el) {}\n        draw();\n        break;\n      default:\n        break;\n    }\n  }\n};\n\ndocument.addEventListener('keydown', gameKeys);\n\nfunction draw() {\n  const fieldCeils = document.querySelectorAll('.field-cell');\n\n  playingField.field.flat().forEach((el, index) => {\n    if (el === 0) {\n      fieldCeils[index].textContent = '';\n      fieldCeils[index].classList = ['field-cell'];\n    } else {\n      fieldCeils[index].textContent = el;\n      fieldCeils[index].classList = [`field-cell field-cell--${el}`];\n    }\n  });\n\n  loseGame();\n  winner();\n  changeScore();\n}\n\nfunction changeScore() {\n  const score = document.querySelector('.game-score');\n\n  score.textContent = playingField.score;\n}\n\nfunction loseGame() {\n  const currentField = playingField.field.flat();\n\n  if (currentField.every(el => el !== 0) && notAdded(playingField.field)) {\n    document.querySelector('.message.message-lose.hidden').classList.remove('hidden');\n    document.querySelector('.message.message-lose').style.cursor = 'pointer';\n  }\n}\n\nfunction notAdded(matrix) {\n  const n = matrix.length;\n  const m = matrix[0].length;\n\n  for (let i = 0; i < n; i++) {\n    for (let j = 0; j < m; j++) {\n      const currentValue = matrix[i][j];\n\n      if (i > 0 && matrix[i - 1][j] === currentValue) {\n        return false;\n      }\n\n      if (i < n - 1 && matrix[i + 1][j] === currentValue) {\n        return false;\n      }\n\n      if (j > 0 && matrix[i][j - 1] === currentValue) {\n        return false;\n      }\n\n      if (j < m - 1 && matrix[i][j + 1] === currentValue) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction winner() {\n  if (playingField.field.flat().some(el => el === 2048)) {\n    document.querySelector('.message.message-win.hidden').classList.remove('hidden');\n  }\n}\n"]}